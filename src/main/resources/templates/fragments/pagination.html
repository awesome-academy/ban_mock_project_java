<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<body>
<!--
    Pagination Fragment for Activity Logs - delegates to extended pagination
-->
<th:block th:fragment="activityLogsPagination(currentPage, totalPages, totalElements, size, userId, action, entityType, startDate, endDate)">
    <th:block th:replace="~{fragments/pagination :: extendedPagination('/admin/activity-logs', 'admin.activity.logs.pagination.info', ${currentPage}, ${totalPages}, ${totalElements}, ${size}, null, ${startDate}, ${endDate}, ${userId}, null, null, null, null, null, ${action}, ${entityType}, null, null)}"></th:block>
</th:block>

<!--
    Generic Pagination Fragment
    Parameters:
    - endpoint: The base URL (e.g., '/admin/expenses', '/admin/incomes')
    - paginationInfoKey: i18n key for pagination info message
    - currentPage, totalPages, totalElements, size: pagination state
    - name, startDate, endDate: filter parameters
-->
<th:block th:fragment="genericPagination(endpoint, paginationInfoKey, currentPage, totalPages, totalElements, size, name, startDate, endDate)">
    <th:block th:replace="~{fragments/pagination :: extendedPagination(${endpoint}, ${paginationInfoKey}, ${currentPage}, ${totalPages}, ${totalElements}, ${size}, ${name}, ${startDate}, ${endDate}, null, null, null, null, null, null, null, null, null, null)}"></th:block>
</th:block>

<!--
    Extended Generic Pagination Fragment
    Supports additional optional filter parameters for budgets, activity logs, users and other entities.
    Parameters:
    - endpoint: The base URL (e.g., '/admin/expenses', '/admin/budgets')
    - paginationInfoKey: i18n key for pagination info message
    - currentPage, totalPages, totalElements, size: pagination state
    - name, startDate, endDate: common filter parameters
    - userId, categoryId, year, month, isOverBudget, active: optional budget-specific filters
    - action, entityType: optional activity log filters
    - email, role: optional user filters
-->
<th:block th:fragment="extendedPagination(endpoint, paginationInfoKey, currentPage, totalPages, totalElements, size, name, startDate, endDate, userId, categoryId, year, month, isOverBudget, active, action, entityType, email, role)">
    <div class="row mt-3" th:if="${totalPages > 1}">
        <div class="col-md-5">
            <p th:text="#{${paginationInfoKey}(${currentPage + 1}, ${totalPages}, ${totalElements})}">
                Page 1 of 10 (100 total)
            </p>
        </div>
        <div class="col-md-7">
            <nav>
                <ul class="pagination justify-content">
                    <!-- Previous Button -->
                    <li class="page-item" th:classappend="${currentPage == 0} ? 'disabled'">
                        <a class="page-link"
                           th:href="@{${endpoint}(page=${currentPage - 1}, size=${size}, name=${name}, startDate=${startDate}, endDate=${endDate}, userId=${userId}, categoryId=${categoryId}, year=${year}, month=${month}, isOverBudget=${isOverBudget}, active=${active}, action=${action}, entityType=${entityType}, email=${email}, role=${role})}"
                           th:text="#{label.pagination.previous}">Previous</a>
                    </li>

                    <!-- First page -->
                    <li class="page-item" th:if="${currentPage > 2}"
                        th:classappend="${0 == currentPage} ? 'active'">
                        <a class="page-link"
                           th:href="@{${endpoint}(page=0, size=${size}, name=${name}, startDate=${startDate}, endDate=${endDate}, userId=${userId}, categoryId=${categoryId}, year=${year}, month=${month}, isOverBudget=${isOverBudget}, active=${active}, action=${action}, entityType=${entityType}, email=${email}, role=${role})}"
                           th:text="1">1</a>
                    </li>

                    <!-- Ellipsis before -->
                    <li class="page-item" th:if="${currentPage > 3}">
                        <span class="page-link">...</span>
                    </li>

                    <!-- Current page Â± 2 -->
                    <li class="page-item"
                        th:each="i : ${#numbers.sequence(currentPage - 2 < 0 ? 0 : currentPage - 2,
                                                         currentPage + 2 >= totalPages ? totalPages - 1 : currentPage + 2)}"
                        th:classappend="${i == currentPage} ? 'active'">
                        <a class="page-link"
                           th:href="@{${endpoint}(page=${i}, size=${size}, name=${name}, startDate=${startDate}, endDate=${endDate}, userId=${userId}, categoryId=${categoryId}, year=${year}, month=${month}, isOverBudget=${isOverBudget}, active=${active}, action=${action}, entityType=${entityType}, email=${email}, role=${role})}"
                           th:text="${i + 1}">1</a>
                    </li>

                    <!-- Ellipsis after -->
                    <li class="page-item" th:if="${currentPage < totalPages - 4}">
                        <span class="page-link">...</span>
                    </li>

                    <!-- Last page -->
                    <li class="page-item" th:if="${currentPage < totalPages - 3}"
                        th:classappend="${totalPages - 1 == currentPage} ? 'active'">
                        <a class="page-link"
                           th:href="@{${endpoint}(page=${totalPages - 1}, size=${size}, name=${name}, startDate=${startDate}, endDate=${endDate}, userId=${userId}, categoryId=${categoryId}, year=${year}, month=${month}, isOverBudget=${isOverBudget}, active=${active}, action=${action}, entityType=${entityType}, email=${email}, role=${role})}"
                           th:text="${totalPages}">10</a>
                    </li>

                    <!-- Next Button -->
                    <li class="page-item" th:classappend="${currentPage >= totalPages - 1} ? 'disabled'">
                        <a class="page-link"
                           th:href="@{${endpoint}(page=${currentPage + 1}, size=${size}, name=${name}, startDate=${startDate}, endDate=${endDate}, userId=${userId}, categoryId=${categoryId}, year=${year}, month=${month}, isOverBudget=${isOverBudget}, active=${active}, action=${action}, entityType=${entityType}, email=${email}, role=${role})}"
                           th:text="#{label.pagination.next}">Next</a>
                    </li>
                </ul>
            </nav>
        </div>
    </div>
</th:block>

<!--
    Pagination Fragment for Expenses - delegates to generic pagination
-->
<th:block th:fragment="expensesPagination(currentPage, totalPages, totalElements, size, name, startDate, endDate)">
    <th:block th:replace="~{fragments/pagination :: genericPagination('/admin/expenses', 'admin.expense.pagination.info', ${currentPage}, ${totalPages}, ${totalElements}, ${size}, ${name}, ${startDate}, ${endDate})}"></th:block>
</th:block>

<!--
    Pagination Fragment for Incomes - delegates to generic pagination
-->
<th:block th:fragment="incomesPagination(currentPage, totalPages, totalElements, size, name, startDate, endDate)">
    <th:block th:replace="~{fragments/pagination :: genericPagination('/admin/incomes', 'admin.income.pagination.info', ${currentPage}, ${totalPages}, ${totalElements}, ${size}, ${name}, ${startDate}, ${endDate})}"></th:block>
</th:block>

<!--
    Pagination Fragment for Budgets - delegates to extended pagination
-->
<th:block th:fragment="budgetsPagination(currentPage, totalPages, totalElements, size, name, userId, categoryId, year, month, isOverBudget, active)">
    <th:block th:replace="~{fragments/pagination :: extendedPagination('/admin/budgets', 'admin.budget.pagination.info', ${currentPage}, ${totalPages}, ${totalElements}, ${size}, ${name}, null, null, ${userId}, ${categoryId}, ${year}, ${month}, ${isOverBudget}, ${active}, null, null, null, null)}"></th:block>
</th:block>

<!--
    Pagination Fragment for Users - delegates to extended pagination
-->
<th:block th:fragment="usersPagination(currentPage, totalPages, totalElements, size, name, email, role, active)">
    <th:block th:replace="~{fragments/pagination :: extendedPagination('/admin/users', 'admin.user.pagination.info', ${currentPage}, ${totalPages}, ${totalElements}, ${size}, ${name}, null, null, null, null, null, null, null, ${active}, null, null, ${email}, ${role})}"></th:block>
</th:block>
</body>
</html>
